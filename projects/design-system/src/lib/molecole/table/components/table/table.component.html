<div class="table-wrapper">

    <p-table [selectionMode]="selectionType" [filters]="filters" (onRowSelect)="selectedEvent()"
        (onRowUnselect)="selectedEvent()" [resizableColumns]="false" [(selection)]="selectedValue"
        [scrollable]="isScrollable" [scrollHeight]="scrollHeight" [alwaysShowPaginator]="alwaysShowPaginator"
        [columns]="columns" [value]="value" [paginator]="showPaginator" [rows]="nRowsPerPage"
        [rowsPerPageOptions]="rowsPerPage" [totalRecords]="totalRecords" [currentPageReportTemplate]="reportString"
        [loading]="loading" [showCurrentPageReport]="showReportPage" [(first)]="firstRowInPage" [lazy]="lazy"
        [lazyLoadOnInit]="lazyOnInit" [customSort]="serverSort" (onSort)="emitSort($event)"
        (onLazyLoad)="lazyLoading($event)">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <ng-container *ngIf="showHeader">
                    <th *ngIf="isSelectable">
                        <!-- <p-tableHeaderCheckbox (click)="selectedEvent()"></p-tableHeaderCheckbox> -->
                    </th>
                    <th *ngFor="let col of columns" [pSortableColumn]="col.sort ? col.field : null">
                        {{col.header}}
                        <p-sortIcon *ngIf="col.sort" [field]="col.field"></p-sortIcon>
                    </th>
                    <th *ngIf="actions" pFrozenColumn [frozen]="true" alignFrozen="right">
                        Operazioni
                    </th>
                </ng-container>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-rowData let-i="rowIndex" let-columns="columns">
            <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="i">
                <ng-template [ngTemplateOutlet]="externalBody ? externalBody : internalBody"
                    [ngTemplateOutletContext]="{data:rowData, column:columns}">

                </ng-template>

            </tr>
        </ng-template>
    </p-table>
</div>

<ng-template #internalHeader let-columns="columns">
    <th *ngIf="isSelectable">
        <!-- <p-tableHeaderCheckbox (click)="selectedEvent()"></p-tableHeaderCheckbox> -->
    </th>
    <th *ngFor="let col of columns" [pSortableColumn]="col.sort ? col.field : null">
        {{col.header}}
        <p-sortIcon *ngIf="col.sort" [field]="col.field"></p-sortIcon>
    </th>
    <th *ngIf="actions" pFrozenColumn [frozen]="true" alignFrozen="right">
        Operazioni
    </th>
</ng-template>

<ng-template #internalBody let-data="data" let-columns="column">
    <td *ngIf="isSelectable">
        <p-tableCheckbox [value]="data"></p-tableCheckbox>
    </td>
    <td *ngFor="let col of columns" [class]="col.classes ? col.classes : ''">
        <!-- DATI DELLE COLONNE -->
        <span [innerHTML]="getFieldValue(data, col.field)">
        </span>
    </td>

    <td *ngIf=" actions" pFrozenColumn [frozen]="true" alignFrozen="right">
        <ng-container [ngTemplateOutlet]="actions" [ngTemplateOutletContext]="{data:data}">
        </ng-container>
    </td>
</ng-template>